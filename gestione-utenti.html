<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gestione utenti â€” Web App Incasso</title>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="Home">
        <svg width="50" height="50" viewBox="0 0 100 60" fill="none" aria-hidden>
          <!-- Simple car body -->
          <rect x="15" y="30" width="70" height="20" rx="3" fill="currentColor"/>
          <!-- Car roof/cabin -->
          <path d="M30 30 L35 15 L65 15 L70 30" fill="currentColor"/>
          <!-- Front wheel -->
          <circle cx="30" cy="52" r="8" fill="currentColor"/>
          <circle cx="30" cy="52" r="4" fill="var(--bg-primary)" stroke="currentColor" stroke-width="1"/>
          <!-- Back wheel -->
          <circle cx="70" cy="52" r="8" fill="currentColor"/>
          <circle cx="70" cy="52" r="4" fill="var(--bg-primary)" stroke="currentColor" stroke-width="1"/>
          <!-- Windows -->
          <rect x="38" y="18" width="10" height="10" fill="var(--bg-primary)" opacity="0.3"/>
          <rect x="52" y="18" width="10" height="10" fill="var(--bg-primary)" opacity="0.3"/>
          <!-- Headlight -->
          <circle cx="17" cy="35" r="2" fill="#FFD700" opacity="0.8"/>
        </svg>
      </a>
      <nav class="nav" aria-label="Navigazione principale">
        <a href="index.html">Home</a>
        <a href="gestione-verbali.html">Gestione multe</a>
        <a href="gestione-utenti.html" aria-current="page">Utenti</a>
      </nav>
    </div>
  </header>

  <main class="container" style="padding:var(--space-lg) 0;">
    <h1>Gestione utenti</h1>

    <section class="card">
      <h2>Aggiungi / Modifica utente</h2>
      <form id="userForm">
        <div class="form-row">
          <label for="userUsername">Username</label>
          <input id="userUsername" class="input" type="text" required />
        </div>
        <div class="form-row">
          <label for="userPassword">Password</label>
          <input id="userPassword" class="input" type="password" required />
        </div>
        <div class="form-row">
          <label for="userRole">Ruolo</label>
          <select id="userRole" class="input" required>
            <option value="operatore">Operatore (solo incassi)</option>
            <option value="contabile">Contabile (solo verbali)</option>
            <option value="amministratrice_ufficio">Amministratrice Ufficio (incassi + verbali)</option>
            <option value="admin">Amministratore (accesso completo)</option>
          </select>
        </div>
        <div class="form-row" style="align-items:center;display:flex;gap:12px;">
          <label style="display:flex;align-items:center;gap:8px"><input id="userActive" type="checkbox" checked /> Account attivo</label>
        </div>
        <div style="display:flex;gap:8px" id="userFormActions">
          <button type="submit" class="btn btn-primary">Salva utente</button>
        </div>
      </form>
    </section>

    <section class="card" style="margin-top:var(--space-md)">
      <h2>Utenti registrati</h2>
      <table style="width:100%">
        <thead>
          <tr>
            <th>Username</th>
            <th>Ruolo</th>
            <th>Stato</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody id="usersList">
          <!-- rows generated by JS -->
        </tbody>
      </table>
    </section>

  </main>

  <!-- Modal conferma -->
  <div id="confirmModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);z-index:9999;align-items:center;justify-content:center">
    <div class="card" style="max-width:400px;margin:20px">
      <h3 id="confirmTitle">Conferma</h3>
      <p id="confirmMessage"></p>
      <div style="display:flex;gap:8px;margin-top:var(--space-md)">
        <button id="confirmYes" class="btn btn-primary">Conferma</button>
        <button id="confirmNo" class="btn btn-ghost">Annulla</button>
      </div>
    </div>
  </div>

  <script src="auth.js"></script>
  <script src="gestione-utenti.js"></script>
</body>
</html>
